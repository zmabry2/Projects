<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Sample Voting Functionality</title>
	<style type="text/css">
		#vote_button { background: url('vote.png') no-repeat scroll 0 0 transparent; cursor: pointer; height: 25px; width: 95px; }
		#vote_button_2 { background: url('vote.png') no-repeat scroll 0 0 transparent; cursor: pointer; height: 25px; width: 95px; }
		#vote_count { padding: 8px 0pt 0pt 30px; }
		#vote_count_2 { padding: 8px 0pt 0pt 30px; }
	</style>
</head>
<body>
	<!-- Div for vote button and number of votes -->
	<div id="vote_button">
		<!-- Div for number of votes -->
		<div id="vote_count">&nbsp;</div>
	</div>
	<div id="vote_button_2">
		<!-- Div for number of votes -->
		<div id="vote_count_2">&nbsp;</div>
	</div>
	<!-- Div for vote recorded message -->
	<div id="vote_already_2" style="display: none;">Your have already voted.</div>
	<!-- Div for already voted message -->
	<div id="vote_recorded_2" style="display: none;">Thanks for your vote!</div>
	<script src= "https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"	type="text/javascript"></script>
	<script type="text/javascript">
	$(document).ready(function()
	{
		// Display number of votes for this item on page load.
		var item_id = 1;	// This is the item_id for which the number of votes are to be displayed.
		var ajax_data1 = "query=votecount&item_id=" + item_id;
		jQuery.ajax({
			type: "GET",
			url: "vote.php",
			data: ajax_data1,
			dataType: "html",
			success: function(html){
				jQuery("#vote_count").html(html);
		   }
		});
	});
	$("#vote_button_1").click(function()
	{
		var item_id = 1;	// This is the item_id for which the number of votes are to be displayed.
		var user_id = 1;	// This is the user_id who is voting.
		var ajax_data = "query=vote&item_id=" + item_id + "&user_id=" + user_id;
		$.ajax({
			type: "GET",
			url: "vote.php",
			data: ajax_data,
			dataType: "html",
			success: function(votecount){
				if(votecount == -1){
					// The user has already voted.
					$("#vote_recorded").css({ display:'none' });
					$("#vote_already").css({ display:'' });
				}
				else
				{
					// Vote recorded, display the updated count.
					$("#vote_already").css({ display:'none' });
					$("#vote_count").html(votecount);
					$("#vote_recorded").css({ display:'' });
				}
			}
		});
	});
	$("#vote_button_2").click(function()
	{
		var item_id = 2;	// This is the item_id for which the number of votes are to be displayed.
		var user_id = 1;	// This is the user_id who is voting.
		var ajax_data = "query=vote&item_id=" + item_id + "&user_id=" + user_id;
		$.ajax({
			type: "GET",
			url: "vote.php",
			data: ajax_data,
			dataType: "html",
			success: function(votecount){
				if(votecount == -1){
					// The user has already voted.
					$("#vote_recorded").css({ display:'none' });
					$("#vote_already").css({ display:'' });
				}
				else
				{
					// Vote recorded, display the updated count.
					$("#vote_already").css({ display:'none' });
					$("#vote_count_2").html(votecount);
					$("#vote_recorded").css({ display:'' });
				}
			}
		});
	});
	</script>
</body>
</html>
